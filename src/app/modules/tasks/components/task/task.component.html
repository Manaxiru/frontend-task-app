@for (item of tasks(); track item.id) {
<mat-card [ngClass]="{completed: item.completed, selected: taskSelected?.id === item.id}"
	(click)="taskSelected?.id !== item.id ? taskSelected = item : taskSelected = null">
	<mat-card-header>
		<mat-card-title-group>
			<mat-card-title>
				<h3> {{ item.title }} </h3>
			</mat-card-title>
			<mat-card-subtitle>
				<p class="p4">
					Creado el {{ item.createdAt | date: "EEEE dd 'de' MMMM 'de' YYYY 'a las' hh:mm aaa" }}
				</p>
				@if (item.createdAt !== item.updatedAt) {
				<p class="p4">
					Última modificación el {{ item.updatedAt | date: "EEEE dd 'de' MMMM 'de' YYYY 'a las' hh:mm aaa" }}
				</p>
				}
			</mat-card-subtitle>
		</mat-card-title-group>
	</mat-card-header>
	<mat-card-content>
		<p class="p2"> {{ item.description }}</p>
	</mat-card-content>
	<mat-card-actions align="end">
		<button mat-mini-fab matTooltip="Editar" class="edit">
			<mat-icon> edit </mat-icon>
		</button>
		<button mat-mini-fab matTooltip="Eliminar" class="delete" (click)="confirmAction(item)">
			<mat-icon> delete </mat-icon>
		</button>
	</mat-card-actions>
</mat-card>
}

<ng-template #confirmDialog>
	<h2 mat-dialog-title> ¿Desea eliminar la tarea? </h2>
	<mat-dialog-actions>
		<button mat-stroked-button color="primary" mat-dialog-close> Cancelar </button>
		<button mat-stroked-button color="primary" [mat-dialog-close]="true"> Aceptar </button>
	</mat-dialog-actions>
</ng-template>